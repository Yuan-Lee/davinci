(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"0b6a5fce95cc6be643c8":function(e,a,t){var n=t("11c5eb3d0b17e3b5dc5c");"string"===typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t("1e4534d1d62a11482e97")(n,r);n.locals&&(e.exports=n.locals)},"11c5eb3d0b17e3b5dc5c":function(e,a,t){(a=e.exports=t("c138e55a31f3f8960e99")(!1)).push([e.i,"._1RAdf8108_E89K4FhzQ-Qr{width:80px}.FayDDxA_NYYmuxHHeOQlL i{margin-left:8px}.FayDDxA_NYYmuxHHeOQlL i:hover{cursor:pointer}.CcNpEc68iQdNMuIvhfYen{max-height:600px;overflow-y:scroll}",""]),a.locals={tableInput:"_1RAdf8108_E89K4FhzQ-Qr",tableEditCell:"FayDDxA_NYYmuxHHeOQlL",headerTable:"CcNpEc68iQdNMuIvhfYen"}},a3cbecd9904c2b36c6fa:function(e,a,t){(a=e.exports=t("c138e55a31f3f8960e99")(!1)).push([e.i,"._2xLBVuHZjmn6F5VkAxyxZa{padding:8px}._2xLBVuHZjmn6F5VkAxyxZa ._3iXhC71pUfECXfqf44b2EV{min-height:40px}._2346_F9E7vB9mc5ocIZVbi{width:28px}._20lbb_POB2WlxojsuP1Lsx{width:100%}",""]),a.locals={rows:"_2xLBVuHZjmn6F5VkAxyxZa",rowBlock:"_3iXhC71pUfECXfqf44b2EV",color:"_2346_F9E7vB9mc5ocIZVbi",colControl:"_20lbb_POB2WlxojsuP1Lsx"}},d7cf1b4945a97d9fb8a7:function(e,a,t){var n=t("a3cbecd9904c2b36c6fa");"string"===typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t("1e4534d1d62a11482e97")(n,r);n.locals&&(e.exports=n.locals)},f593cab48525cf136650:function(e,a,t){"use strict";t.r(a);t("c833753c075a1a94e223");var n=t("01ab831a39f17fa139f6"),r=t.n(n),o=(t("e19205557bb71c52af9f"),t("ecb09fa8e73d7235d766")),c=t.n(o),l=(t("e11857c91600edea8976"),t("8b2c24afe31a29ef308f")),i=t.n(l),f=(t("6e649df377d8be240b5b"),t("24c9ba8c54cb8f78eefa")),u=t.n(f),s=(t("430efd9ee93fab5ea3aa"),t("ab77426700a64afb515f")),d=t.n(s),m=(t("cce4e96b47a88eedc219"),t("4634762afad890a7174e")),p=t.n(m),y=(t("2bef2847a697d49723f5"),t("8ea69893f2da751b3fed")),b=t.n(y),g=(t("c099c4fc48cd9bb84110"),t("21700e306353b2e19c0b")),h=t.n(g),v=(t("aaa12c37f93504858944"),t("21677e23133eca295df8")),C=t.n(v),E=(t("9aab8d24fa9c1f9b6dd4"),t("d55bad88381be4779722")),k=t.n(E),w=(t("b28d1f103e4a5b2e8ef8"),t("55f6171b5a254025824d")),x=t.n(w),H=t("8af190b70a6bc55c6f1b"),S=t.n(H),N=t("b912ecc4473ae8a2ff0b"),j=t.n(N),_=t("55c69f0ea731e712b8f3"),I=t("3bb731ebd40812aa4cb1"),O=t("39619bfaf8da2322503f"),A=t("54f683fcda7806277002"),P=t("0b6a5fce95cc6be643c8"),K=t.n(P),F=t("d7cf1b4945a97d9fb8a7"),B=t.n(F);function z(e){return(z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function D(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(t.push(c.value),!a||t.length!==a);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Q(e){return function(e){if(Array.isArray(e)){for(var a=0,t=new Array(e.length);a<e.length;a++)t[a]=e[a];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,a){return!a||"object"!==z(a)&&"function"!==typeof a?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):a}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,a){return(Y=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}var Z=x.a.Group,T=k.a.Group,J=k.a.Button,W=S.a.createElement(J,{value:"flex-start"},"\u5de6\u5bf9\u9f50"),G=S.a.createElement(J,{value:"center"},"\u5c45\u4e2d"),U=S.a.createElement(J,{value:"flex-end"},"\u53f3\u5bf9\u9f50"),X=S.a.createElement(h.a,{type:"arrow-up"}),q=S.a.createElement(h.a,{type:"arrow-down"}),$=S.a.createElement(p.a,{span:1},S.a.createElement(d.a,{type:"flex",justify:"end"},S.a.createElement(r.a,{title:"\u8868\u683c\u6570\u636e\u5217\u8bf7\u5728\u5916\u90e8\u62d6\u62fd\u4ee5\u66f4\u6539\u987a\u5e8f"},S.a.createElement(h.a,{type:"info-circle"})))),ee=function(e){function a(e){var t;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),(t=M(this,R(a).call(this,e))).headerNameInput=S.a.createRef(),t.moveUp=function(){var e=t.state,a=e.localConfig,n=e.mapHeaderParent,r=e.currentSelectedKeys;r.length<=0?C.a.warning("\u8bf7\u52fe\u9009\u8981\u4e0a\u79fb\u7684\u5217"):(r.forEach(function(e){var t=n[e],r=t?t.children:a,o=r.findIndex(function(a){return a.key===e});if(!(o<1)){var c=r[o-1];r[o-1]=r[o],r[o]=c}}),t.setState({localConfig:Q(a)}))},t.moveDown=function(){var e=t.state,a=e.localConfig,n=e.mapHeaderParent,r=e.currentSelectedKeys;r.length<=0?C.a.warning("\u8bf7\u52fe\u9009\u8981\u4e0b\u79fb\u7684\u5217"):(r.forEach(function(e){var t=n[e],r=t?t.children:a,o=r.findIndex(function(a){return a.key===e});if(!(o>=r.length-1)){var c=r[o];r[o]=r[o+1],r[o+1]=c}}),t.setState({localConfig:Q(a)}))},t.mergeColumns=function(){var e=t.state,a=e.localConfig,n=e.mapHeader,r=e.mapHeaderParent,o=e.currentSelectedKeys;if(o.length<=0)C.a.warning("\u8bf7\u52fe\u9009\u8981\u5408\u5e76\u7684\u5217");else{var c=[];if(o.forEach(function(e){for(var a=n[e];o.includes(a.key);){var t=r[a.key];if(!t)break;a=t}c.findIndex(function(e){return e.key===a.key})<0&&c.push(a)}),c.every(function(e){return!r[e.key]})){var l={key:Object(_.d)(5),headerName:"\u65b0\u5efa\u5408\u5e76\u5217",alias:null,visualType:null,isGroup:!0,style:Object.assign({},I.a,{justifyContent:"center"}),children:c},i=a.length-c.length;i=c.reduce(function(e,t){return Math.min(e,a.findIndex(function(e){return e.key===t.key}))},i);var f=c.map(function(e){return e.key}),u=a.filter(function(e){return!f.includes(e.key)});u.splice(i,0,l);var s=D(t.getMapHeaderKeyAndConfig(u),2),d=s[0],m=s[1];t.setState({localConfig:u,mapHeader:d,mapHeaderParent:m,currentEditingConfig:l,currentSelectedKeys:[]},function(){t.headerNameInput.current.focus(),t.headerNameInput.current.select()})}else C.a.warning("\u52fe\u9009\u7684\u5217\u5e94\u662f\u5f53\u524d\u6700\u4e0a\u7ea7\u5217")}},t.cancel=function(){t.props.onCancel()},t.save=function(){t.props.onSave(t.state.localConfig)},t.propChange=function(e,a){return function(n){var r=n.target?n.target.value:n,o=t.state.localConfig,c=e.key,l=function(e){var t=c===e.key;return t&&(e.style[a]=r),t};o.some(function(e){return t.traverseHeaderConfig(e,null,l)}),t.setState({localConfig:Q(o)})}},t.editHeaderName=function(e){return function(){t.state.localConfig.some(function(a){return t.traverseHeaderConfig(a,null,function(a){var n=a.key===e;return n&&t.setState({currentEditingConfig:a},function(){t.headerNameInput.current.focus(),t.headerNameInput.current.select()}),n})})}},t.deleteHeader=function(e){return function(){var a=t.state,n=a.localConfig,r=(a.mapHeader,a.mapHeaderParent);n.some(function(a){return t.traverseHeaderConfig(a,null,function(a){var t=a.key===e;if(t){var o,c,l=r[a.key];if(l)o=l.children.findIndex(function(e){return e.key===a.key}),(c=l.children).splice.apply(c,[o,1].concat(Q(a.children)));else o=n.findIndex(function(e){return e.key===a.key}),n.splice.apply(n,[o,1].concat(Q(a.children)))}return t})});var o=D(t.getMapHeaderKeyAndConfig(n),2),c=o[0],l=o[1];t.setState({mapHeader:c,mapHeaderParent:l,localConfig:n})}},t.saveEditingHeaderName=function(e){var a=e.target.value;if(a){var n=t.state,r=n.localConfig,o=n.currentEditingConfig;r.some(function(e){return t.traverseHeaderConfig(e,null,function(e){var t=e.key===o.key;return t&&(e.headerName=a),t})}),t.setState({localConfig:Q(r),currentEditingConfig:null})}else C.a.warning("\u8bf7\u8f93\u5165\u548c\u5e76\u5217\u540d\u79f0")},t.columns=[{title:"\u8868\u683c\u5217",dataIndex:"headerName",key:"headerName",render:function(e,a){var n=t.state.currentEditingConfig,r=a.key,o=a.headerName,c=a.alias,l=a.isGroup;if(!n||n.key!==r)return l?S.a.createElement("span",{className:K.a.tableEditCell},S.a.createElement("label",null,c||o),S.a.createElement(h.a,{type:"edit",onClick:t.editHeaderName(r)}),S.a.createElement(h.a,{type:"delete",onClick:t.deleteHeader(r)})):S.a.createElement("label",null,c||o);var i=n.headerName;return S.a.createElement(b.a,{ref:t.headerNameInput,className:K.a.tableInput,defaultValue:i,onPressEnter:t.saveEditingHeaderName})}},{title:"\u80cc\u666f\u8272",dataIndex:"backgroundColor",key:"backgroundColor",width:60,render:function(e,a){var n=a.style.backgroundColor;return S.a.createElement(d.a,{type:"flex",justify:"center"},S.a.createElement(p.a,null,S.a.createElement(O.a,{className:B.a.color,value:n,onChange:t.propChange(a,"backgroundColor")})))}},{title:"\u5b57\u4f53",dataIndex:"font",key:"font",width:285,render:function(e,a){var n=a.style,r=n.fontSize,o=n.fontFamily,c=n.fontColor,l=n.fontStyle,i=n.fontWeight;return S.a.createElement(S.a.Fragment,null,S.a.createElement(d.a,{gutter:8,type:"flex",align:"middle",className:B.a.rowBlock},S.a.createElement(p.a,{span:14},S.a.createElement(u.a,{size:"small",className:B.a.colControl,placeholder:"\u5b57\u4f53",value:o,onChange:t.propChange(a,"fontFamily")},I.b)),S.a.createElement(p.a,{span:6},S.a.createElement(u.a,{size:"small",className:B.a.colControl,placeholder:"\u6587\u5b57\u5927\u5c0f",value:r,onChange:t.propChange(a,"fontSize")},I.c)),S.a.createElement(p.a,{span:4},S.a.createElement(O.a,{className:B.a.color,value:c,onChange:t.propChange(a,"fontColor")}))),S.a.createElement(d.a,{gutter:8,type:"flex",align:"middle",className:B.a.rowBlock},S.a.createElement(p.a,{span:12},S.a.createElement(u.a,{size:"small",className:B.a.colControl,value:l,onChange:t.propChange(a,"fontStyle")},I.d)),S.a.createElement(p.a,{span:12},S.a.createElement(u.a,{size:"small",className:B.a.colControl,value:i,onChange:t.propChange(a,"fontWeight")},I.e))))}},{title:"\u5bf9\u9f50",dataIndex:"justifyContent",key:"justifyContent",width:180,render:function(e,a){var n=a.style.justifyContent;return S.a.createElement(T,{size:"small",value:n,onChange:t.propChange(a,"justifyContent")},W,G,U)}}],t.modalFooter=[S.a.createElement(x.a,{key:"cancel",size:"large",onClick:t.cancel},"\u53d6 \u6d88"),S.a.createElement(x.a,{key:"submit",size:"large",type:"primary",onClick:t.save},"\u4fdd \u5b58")],t.tableRowSelection={hideDefaultSelections:!0,onChange:function(e){t.setState({currentSelectedKeys:e})}};var n=Object(A.fromJS)(e.config).toJS(),r=D(t.getMapHeaderKeyAndConfig(n),2),o=r[0],c=r[1];return t.state={localConfig:n,currentEditingConfig:null,mapHeader:o,mapHeaderParent:c,currentSelectedKeys:[]},t}var t,n,r;return function(e,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&Y(e,a)}(a,S.a.PureComponent),t=a,(n=[{key:"componentWillReceiveProps",value:function(e){if(e.config!==this.props.config){var a=Object(A.fromJS)(e.config).toJS(),t=D(this.getMapHeaderKeyAndConfig(a),2),n=t[0],r=t[1];this.setState({localConfig:a,mapHeader:n,mapHeaderParent:r,currentSelectedKeys:[]})}}},{key:"getMapHeaderKeyAndConfig",value:function(e){var a=this,t={},n={};return e.forEach(function(e){return a.traverseHeaderConfig(e,null,function(e,a){return t[e.key]=e,n[e.key]=a,!1})}),[t,n]}},{key:"traverseHeaderConfig",value:function(e,a,t){var n=this,r=t(e,a);return r||(r=Array.isArray(e.children)&&e.children.some(function(a){return n.traverseHeaderConfig(a,e,t)}))}},{key:"render",value:function(){var e,a=this.props.visible,t=this.state,n=t.localConfig,r=t.currentSelectedKeys,o=Object.assign({},this.tableRowSelection,{selectedRowKeys:r}),l=j()((V(e={},B.a.rows,!0),V(e,K.a.headerTable,!0),e));return S.a.createElement(c.a,{title:"\u8868\u5934\u6837\u5f0f\u4e0e\u5206\u7ec4",width:1e3,maskClosable:!1,footer:this.modalFooter,visible:a,onCancel:this.cancel,onOk:this.save},S.a.createElement("div",{className:B.a.rows},S.a.createElement(d.a,{gutter:8,className:B.a.rowBlock,type:"flex",align:"middle"},S.a.createElement(p.a,{span:4},S.a.createElement(x.a,{type:"primary",onClick:this.mergeColumns},"\u5408\u5e76")),S.a.createElement(p.a,{span:19},S.a.createElement(d.a,{gutter:8,type:"flex",justify:"end",align:"middle"},S.a.createElement(Z,null,S.a.createElement(x.a,{onClick:this.moveUp},X,"\u4e0a\u79fb"),S.a.createElement(x.a,{onClick:this.moveDown},"\u4e0b\u79fb",q)))),$)),S.a.createElement("div",{className:l},S.a.createElement(d.a,{gutter:8,className:B.a.rowBlock},S.a.createElement(p.a,{span:24},S.a.createElement(i.a,{bordered:!0,pagination:!1,columns:this.columns,dataSource:n,rowSelection:o})))))}}])&&L(t.prototype,n),r&&L(t,r),a}();a.default=ee}}]);