(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"0b6a5fce95cc6be643c8":function(e,t,n){var a=n("c7d8a3b7b252346ba444");"string"===typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("1e4534d1d62a11482e97")(a,r);a.locals&&(e.exports=a.locals)},"32d2dbef0cab159c69ba":function(e,t,n){(t=e.exports=n("0e326f80368fd0b1333e")(!1)).push([e.i,"._1q4V-Xm8DpnMlz7R_SHZDE {\n  padding: 8px;\n}\n._1q4V-Xm8DpnMlz7R_SHZDE ._2sIEMq1uG6Umq6iw6ciwM4 {\n  min-height: 40px;\n}\n.vS-xiE-385Mvw0Pc3dbv1 {\n  width: 28px;\n}\n.kSxmsrsfAmkwdt9oR3viI {\n  width: 100%;\n}\n",""]),t.locals={rows:"_1q4V-Xm8DpnMlz7R_SHZDE",rowBlock:"_2sIEMq1uG6Umq6iw6ciwM4",color:"vS-xiE-385Mvw0Pc3dbv1",colControl:"kSxmsrsfAmkwdt9oR3viI"}},c7d8a3b7b252346ba444:function(e,t,n){(t=e.exports=n("0e326f80368fd0b1333e")(!1)).push([e.i,"._24fz2HwY8KJrtd3FW4zkjt {\n  width: 80px;\n}\n._1Pwl0V2fmG4y409Ca6jyuz i {\n  margin-left: 8px;\n}\n._1Pwl0V2fmG4y409Ca6jyuz i:hover {\n  cursor: pointer;\n}\n._2UDzx1oc-P3i2RF7VxXzzl {\n  max-height: 600px;\n  overflow-y: auto;\n}\n",""]),t.locals={tableInput:"_24fz2HwY8KJrtd3FW4zkjt",tableEditCell:"_1Pwl0V2fmG4y409Ca6jyuz",headerTable:"_2UDzx1oc-P3i2RF7VxXzzl"}},d7cf1b4945a97d9fb8a7:function(e,t,n){var a=n("32d2dbef0cab159c69ba");"string"===typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("1e4534d1d62a11482e97")(a,r);a.locals&&(e.exports=a.locals)},f593cab48525cf136650:function(e,t,n){"use strict";n.r(t);n("6999797aa33e25ee2583");var a=n("68f65fb3e6ea48cb3f91"),r=(n("ff517e0a0f891807c838"),n("de092bf146ddcde47746")),o=(n("6151e2b24655572bd3d1"),n("269dec4de678ca781390")),l=(n("69b1d6fc066cfdfad52a"),n("14ba9fe1962fa8709415")),c=(n("0faeb8f819c516b9715b"),n("70fc35ebabf20c0c9bd9")),i=(n("823c8732fab4a1e578ab"),n("70a973a0262e0083783d")),f=(n("87de79ac1f9a1cd4cd13"),n("8ca0435fe92d5e05db5b")),u=(n("e803f7813440d08f751a"),n("8417e7e7c48584b19c37")),s=(n("49365767bfb99f07e4e4"),n("79073d7186463aed84f0")),d=(n("18f48e96947854cd1df0"),n("de88b1dd3ca3155569b0")),m=(n("34eeb0d3033f919e494a"),n("2688cdc98aed61204a0c")),p=n("8af190b70a6bc55c6f1b"),y=n.n(p),b=n("b912ecc4473ae8a2ff0b"),g=n.n(b),v=n("55c69f0ea731e712b8f3"),h=n("3bb731ebd40812aa4cb1"),C=n("39619bfaf8da2322503f"),E=n("54f683fcda7806277002"),k=n("0b6a5fce95cc6be643c8"),w=n.n(k),S=n("d7cf1b4945a97d9fb8a7"),x=n.n(S);function H(e){return(H="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function P(e,t){return!t||"object"!==H(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=m.a.Group,K=d.a.Group,M=d.a.Button,R=y.a.createElement(M,{value:"flex-start"},"\u5de6\u5bf9\u9f50"),D=y.a.createElement(M,{value:"center"},"\u5c45\u4e2d"),F=y.a.createElement(M,{value:"flex-end"},"\u53f3\u5bf9\u9f50"),G=y.a.createElement(u.a,{type:"arrow-up"}),V=y.a.createElement(u.a,{type:"arrow-down"}),J=y.a.createElement(i.a,{span:1},y.a.createElement(c.a,{type:"flex",justify:"end"},y.a.createElement(a.a,{title:"\u8868\u683c\u6570\u636e\u5217\u8bf7\u5728\u5916\u90e8\u62d6\u62fd\u4ee5\u66f4\u6539\u987a\u5e8f"},y.a.createElement(u.a,{type:"info-circle"})))),q=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=P(this,O(t).call(this,e))).headerNameInput=y.a.createRef(),n.moveUp=function(){var e=n.state,t=e.localConfig,a=e.mapHeaderParent,r=e.currentSelectedKeys;r.length<=0?s.a.warning("\u8bf7\u52fe\u9009\u8981\u4e0a\u79fb\u7684\u5217"):(r.forEach(function(e){var n=a[e],r=n?n.children:t,o=r.findIndex(function(t){return t.key===e});if(!(o<1)){var l=r[o-1];r[o-1]=r[o],r[o]=l}}),n.setState({localConfig:I(t)}))},n.moveDown=function(){var e=n.state,t=e.localConfig,a=e.mapHeaderParent,r=e.currentSelectedKeys;r.length<=0?s.a.warning("\u8bf7\u52fe\u9009\u8981\u4e0b\u79fb\u7684\u5217"):(r.forEach(function(e){var n=a[e],r=n?n.children:t,o=r.findIndex(function(t){return t.key===e});if(!(o>=r.length-1)){var l=r[o];r[o]=r[o+1],r[o+1]=l}}),n.setState({localConfig:I(t)}))},n.mergeColumns=function(){var e=n.state,t=e.localConfig,a=e.mapHeader,r=e.mapHeaderParent,o=e.currentSelectedKeys;if(o.length<=0)s.a.warning("\u8bf7\u52fe\u9009\u8981\u5408\u5e76\u7684\u5217");else{var l=[];if(o.forEach(function(e){for(var t=a[e];o.includes(t.key);){var n=r[t.key];if(!n)break;t=n}l.findIndex(function(e){return e.key===t.key})<0&&l.push(t)}),l.every(function(e){return!r[e.key]})){var c={key:Object(v.d)(5),headerName:"\u65b0\u5efa\u5408\u5e76\u5217",alias:null,visualType:null,isGroup:!0,style:Object.assign(Object.assign({},h.a),{justifyContent:"center"}),children:l},i=t.length-l.length;i=l.reduce(function(e,n){return Math.min(e,t.findIndex(function(e){return e.key===n.key}))},i);var f=l.map(function(e){return e.key}),u=t.filter(function(e){return!f.includes(e.key)});u.splice(i,0,c);var d=N(n.getMapHeaderKeyAndConfig(u),2),m=d[0],p=d[1];n.setState({localConfig:u,mapHeader:m,mapHeaderParent:p,currentEditingConfig:c,currentSelectedKeys:[]},function(){n.headerNameInput.current.focus(),n.headerNameInput.current.select()})}else s.a.warning("\u52fe\u9009\u7684\u5217\u5e94\u662f\u5f53\u524d\u6700\u4e0a\u7ea7\u5217")}},n.cancel=function(){n.props.onCancel()},n.save=function(){n.props.onSave(n.state.localConfig)},n.propChange=function(e,t){return function(a){var r=a.target?a.target.value:a,o=n.state.localConfig,l=e.key,c=function(e){var n=l===e.key;return n&&(e.style[t]=r),n};o.some(function(e){return n.traverseHeaderConfig(e,null,c)}),n.setState({localConfig:I(o)})}},n.editHeaderName=function(e){return function(){n.state.localConfig.some(function(t){return n.traverseHeaderConfig(t,null,function(t){var a=t.key===e;return a&&n.setState({currentEditingConfig:t},function(){n.headerNameInput.current.focus(),n.headerNameInput.current.select()}),a})})}},n.deleteHeader=function(e){return function(){var t=n.state,a=t.localConfig,r=(t.mapHeader,t.mapHeaderParent);a.some(function(t){return n.traverseHeaderConfig(t,null,function(t){var n=t.key===e;if(n){var o,l,c=r[t.key];if(c)o=c.children.findIndex(function(e){return e.key===t.key}),(l=c.children).splice.apply(l,[o,1].concat(I(t.children)));else o=a.findIndex(function(e){return e.key===t.key}),a.splice.apply(a,[o,1].concat(I(t.children)))}return n})});var o=N(n.getMapHeaderKeyAndConfig(a),2),l=o[0],c=o[1];n.setState({mapHeader:l,mapHeaderParent:c,localConfig:a})}},n.saveEditingHeaderName=function(e){var t=e.target.value;if(t){var a=n.state,r=a.localConfig,o=a.currentEditingConfig;r.some(function(e){return n.traverseHeaderConfig(e,null,function(e){var n=e.key===o.key;return n&&(e.headerName=t),n})}),n.setState({localConfig:I(r),currentEditingConfig:null})}else s.a.warning("\u8bf7\u8f93\u5165\u548c\u5e76\u5217\u540d\u79f0")},n.columns=[{title:"\u8868\u683c\u5217",dataIndex:"headerName",key:"headerName",render:function(e,t){var a=n.state.currentEditingConfig,r=t.key,o=t.headerName,l=t.alias,c=t.isGroup;if(!a||a.key!==r)return c?y.a.createElement("span",{className:w.a.tableEditCell},y.a.createElement("label",null,l||o),y.a.createElement(u.a,{type:"edit",onClick:n.editHeaderName(r)}),y.a.createElement(u.a,{type:"delete",onClick:n.deleteHeader(r)})):y.a.createElement("label",null,l||o);var i=a.headerName;return y.a.createElement(f.a,{ref:n.headerNameInput,className:w.a.tableInput,defaultValue:i,onPressEnter:n.saveEditingHeaderName})}},{title:"\u80cc\u666f\u8272",dataIndex:"backgroundColor",key:"backgroundColor",width:60,render:function(e,t){var a=t.style.backgroundColor;return y.a.createElement(c.a,{type:"flex",justify:"center"},y.a.createElement(i.a,null,y.a.createElement(C.a,{className:x.a.color,value:a,onChange:n.propChange(t,"backgroundColor")})))}},{title:"\u5b57\u4f53",dataIndex:"font",key:"font",width:285,render:function(e,t){var a=t.style,r=a.fontSize,o=a.fontFamily,f=a.fontColor,u=a.fontStyle,s=a.fontWeight;return y.a.createElement(y.a.Fragment,null,y.a.createElement(c.a,{gutter:8,type:"flex",align:"middle",className:x.a.rowBlock},y.a.createElement(i.a,{span:14},y.a.createElement(l.a,{size:"small",className:x.a.colControl,placeholder:"\u5b57\u4f53",value:o,onChange:n.propChange(t,"fontFamily")},h.b)),y.a.createElement(i.a,{span:6},y.a.createElement(l.a,{size:"small",className:x.a.colControl,placeholder:"\u6587\u5b57\u5927\u5c0f",value:r,onChange:n.propChange(t,"fontSize")},h.c)),y.a.createElement(i.a,{span:4},y.a.createElement(C.a,{className:x.a.color,value:f,onChange:n.propChange(t,"fontColor")}))),y.a.createElement(c.a,{gutter:8,type:"flex",align:"middle",className:x.a.rowBlock},y.a.createElement(i.a,{span:12},y.a.createElement(l.a,{size:"small",className:x.a.colControl,value:u,onChange:n.propChange(t,"fontStyle")},h.d)),y.a.createElement(i.a,{span:12},y.a.createElement(l.a,{size:"small",className:x.a.colControl,value:s,onChange:n.propChange(t,"fontWeight")},h.e))))}},{title:"\u5bf9\u9f50",dataIndex:"justifyContent",key:"justifyContent",width:180,render:function(e,t){var a=t.style.justifyContent;return y.a.createElement(K,{size:"small",value:a,onChange:n.propChange(t,"justifyContent")},R,D,F)}}],n.modalFooter=[y.a.createElement(m.a,{key:"cancel",size:"large",onClick:n.cancel},"\u53d6 \u6d88"),y.a.createElement(m.a,{key:"submit",size:"large",type:"primary",onClick:n.save},"\u4fdd \u5b58")],n.tableRowSelection={hideDefaultSelections:!0,onChange:function(e){n.setState({currentSelectedKeys:e})}};var a=Object(E.fromJS)(e.config).toJS(),r=N(n.getMapHeaderKeyAndConfig(a),2),o=r[0],d=r[1];return n.state={localConfig:a,currentEditingConfig:null,mapHeader:o,mapHeaderParent:d,currentSelectedKeys:[]},n}var n,a,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,y.a.PureComponent),n=t,(a=[{key:"componentWillReceiveProps",value:function(e){if(e.config!==this.props.config){var t=Object(E.fromJS)(e.config).toJS(),n=N(this.getMapHeaderKeyAndConfig(t),2),a=n[0],r=n[1];this.setState({localConfig:t,mapHeader:a,mapHeaderParent:r,currentSelectedKeys:[]})}}},{key:"getMapHeaderKeyAndConfig",value:function(e){var t=this,n={},a={};return e.forEach(function(e){return t.traverseHeaderConfig(e,null,function(e,t){return n[e.key]=e,a[e.key]=t,!1})}),[n,a]}},{key:"traverseHeaderConfig",value:function(e,t,n){var a=this,r=n(e,t);return r||(r=Array.isArray(e.children)&&e.children.some(function(t){return a.traverseHeaderConfig(t,e,n)}))}},{key:"render",value:function(){var e,t=this.props.visible,n=this.state,a=n.localConfig,l=n.currentSelectedKeys,f=Object.assign(Object.assign({},this.tableRowSelection),{selectedRowKeys:l}),u=g()((j(e={},x.a.rows,!0),j(e,w.a.headerTable,!0),e));return y.a.createElement(r.a,{title:"\u8868\u5934\u6837\u5f0f\u4e0e\u5206\u7ec4",width:1e3,maskClosable:!1,footer:this.modalFooter,visible:t,onCancel:this.cancel,onOk:this.save},y.a.createElement("div",{className:x.a.rows},y.a.createElement(c.a,{gutter:8,className:x.a.rowBlock,type:"flex",align:"middle"},y.a.createElement(i.a,{span:4},y.a.createElement(m.a,{type:"primary",onClick:this.mergeColumns},"\u5408\u5e76")),y.a.createElement(i.a,{span:19},y.a.createElement(c.a,{gutter:8,type:"flex",justify:"end",align:"middle"},y.a.createElement(A,null,y.a.createElement(m.a,{onClick:this.moveUp},G,"\u4e0a\u79fb"),y.a.createElement(m.a,{onClick:this.moveDown},"\u4e0b\u79fb",V)))),J)),y.a.createElement("div",{className:u},y.a.createElement(c.a,{gutter:8,className:x.a.rowBlock},y.a.createElement(i.a,{span:24},y.a.createElement(o.a,{bordered:!0,pagination:!1,columns:this.columns,dataSource:a,rowSelection:f})))))}}])&&z(n.prototype,a),d&&z(n,d),t}();t.default=q}}]);